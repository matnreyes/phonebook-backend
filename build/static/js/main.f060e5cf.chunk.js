(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(14),u=n.n(o),a=(n(19),n(3)),i=n(0),s=function(e){var t=e.value,n=e.filter;return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["Filter names: ",Object(i.jsx)("input",{value:t,onChange:n})]})})},d=function(e){var t=e.submit,n=e.nameValue,r=e.nameInput,c=e.numberValue,o=e.numberInput;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:n,onChange:r})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:o})]}),Object(i.jsxs)("div",{children:[" ",Object(i.jsx)("button",{id:"submit",type:"submit",children:"add"})]})]})},l=function(e){var t=e.message,n={background:"lightgrey",fontSize:20,fontStyle:"bold",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===t?null:(t.isError?n.color="red":n.color="green",Object(i.jsx)("div",{style:n,children:t.content}))},b=function(e){var t=e.numbers,n=e.handleDelete;return Object(i.jsxs)("ul",{children:[" ",t.map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number,Object(i.jsx)("button",{value:e.id,onClick:n,children:"delete"})]},e.id)}))]})},j=n(4),f=n.n(j),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},p={getContacts:m,addContacts:function(e){return f.a.post(h,e).then((function(e){return e.data}))},deleteContact:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return m()}))},updateContact:function(e){return f.a.put("".concat(h,"/").concat(e.id),e).then((function(e){return m()}))}},O=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),u=Object(a.a)(o,2),j=u[0],f=u[1],h=Object(r.useState)(""),m=Object(a.a)(h,2),O=m[0],v=m[1],x=Object(r.useState)(""),g=Object(a.a)(x,2),C=g[0],y=g[1],S=Object(r.useState)(""),k=Object(a.a)(S,2),E=k[0],w=k[1],T=Object(r.useState)(null),I=Object(a.a)(T,2),U=I[0],V=I[1];Object(r.useEffect)((function(){p.getContacts().then((function(e){c(e),f(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(l,{message:U}),Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(s,{value:E,filter:function(e){var t=e.target.value;w(t),f(n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})))}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{submit:function(e){e.preventDefault();var t={name:O,number:C},r=n.find((function(e){return e.name.toUpperCase()===O.toUpperCase()}));r?window.confirm("".concat(r.name," already in phonebook. Would you like to update their number?"))&&(t.id=r.id,p.updateContact(t).then((function(e){var t={content:"".concat(O," has been updated"),isError:!1};V(t),setTimeout((function(){V(null)}),3e3),c(e),f(e)})).catch((function(e){var t={content:e.response.data.error,isError:!0};V(t),setTimeout((function(){V(null)}),3e3)})),y(""),v("")):(p.addContacts(t).then((function(e){var t={content:"".concat(O," added to phonebook"),isError:!1};V(t),setTimeout((function(){V(null)}),4e3),c(n.concat(e)),f(n.concat(e))})).catch((function(e){console.log(e.response.data.error);var t={content:e.response.data.error,isError:!0};V(t),setTimeout((function(){V(null)}),4e3)})),v(""),y(""))},nameValue:O,nameInput:function(e){v(e.target.value)},numberValue:C,numberInput:function(e){y(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(b,{numbers:j,handleDelete:function(e){var t=n.find((function(t){return t.id===e.target.value}));window.confirm("Are you sure you want to delete ".concat(t.name,"?"))&&p.deleteContact(t.id).then((function(e){var n={content:"".concat(t.name," has been deleted"),isError:!1};V(n),setTimeout((function(){V(null)}),4e3),f(e),c(e)})).catch((function(e){var r={content:"".concat(t.name," is already deleted"),isError:!0};V(r),setTimeout((function(){V(null)}),4e3),f(n.filter((function(e){return e.id!==t.id}))),c(n.filter((function(e){return e.id!==t.id})))}))}})]})};u.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(O,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f060e5cf.chunk.js.map